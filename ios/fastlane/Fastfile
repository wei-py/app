# ios/fastlane/Fastfile

default_platform :ios

platform :ios do
  desc "Build Debug IPA"
  lane :build_debug do
    gym(
      scheme: "app2",
      configuration: "Debug",
      export_method: "development",
      output_directory: "build/export",
      output_name: "app2.ipa",
      clean: true,
      silent: false
    )
  end

  desc "Build Release IPA"
  lane :build_release do
    gym(
      scheme: "app2",
      configuration: "Release",
      export_method: "app-store",
      output_directory: "build/export",
      output_name: "app2.ipa",
      clean: true,
      silent: false,
      export_options: {
        provisioningProfiles: {
          ENV["APP_ID"] => ENV["PROVISIONING_PROFILE_SPECIFIER"]
        },
        signingStyle: "manual",
        signingCertificate: ENV["CODE_SIGN_IDENTITY"],
        teamID: ENV["TEAM_ID"]
      }
    )
  end
end