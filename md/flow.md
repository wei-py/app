Â§™Â•Ω‰∫ÜÔºÅ‰Ω†Â∑≤ÁªèÊèê‰æõ‰∫Ü **Android Âíå iOS ÁöÑÂÆåÊï¥ÁéØÂ¢ÉÂèòÈáèÈÖçÁΩÆ**ÔºåÂπ∂‰∏îÊòéÁ°ÆÂ∏åÊúõÔºö

‚úÖ ‰∏∫ Android Âíå iOS ÂàÜÂà´ÊûÑÂª∫ **DebugÔºàÊµãËØïÔºâ** Âíå **ReleaseÔºàÁîü‰∫ßÔºâ** ÁâàÊú¨  
‚úÖ ‰ΩøÁî® `pnpm` + `Node.js 22`  
‚úÖ ÊâÄÊúâÊïèÊÑü‰ø°ÊÅØÈÄöËøá GitHub Secrets ÂÆâÂÖ®‰º†ÈÄí  
‚úÖ ÊîØÊåÅ `debug.keystore`ÔºàAndroidÔºâÂíåÊâãÂä®ËØÅ‰π¶ÂØºÂÖ•ÔºàiOSÔºâ  
‚úÖ ÊûÑÂª∫‰∫ßÁâ©‰∏ä‰º†‰∏∫ Artifact  

---

## ‚úÖ ÁõÆÊ†áÔºö4 ‰∏™Áã¨Á´ãÂ∑•‰ΩúÊµÅ

Êàë‰ª¨Â∞Ü‰∏∫‰Ω†ÁîüÊàê‰ª•‰∏ã **4 ‰∏™ÂÆåÊï¥ÁöÑ GitHub Actions Â∑•‰ΩúÊµÅÊñá‰ª∂**ÔºåÊØè‰∏™ÈÉΩÊîØÊåÅ‰ªé `secrets` Ê≥®ÂÖ•ÂèòÈáèÔºåÂπ∂Ëá™Âä®Â§ÑÁêÜÁ≠æÂêçÔºö

1. `assemble_android_debug.yml`  
2. `assemble_android_release.yml`  
3. `assemble_ios_debug.yml`  
4. `assemble_ios_release.yml`

---

# üìÅ È°πÁõÆÁªìÊûÑ

```
.github/
‚îî‚îÄ‚îÄ workflows/
    ‚îú‚îÄ‚îÄ assemble_android_debug.yml
    ‚îú‚îÄ‚îÄ assemble_android_release.yml
    ‚îú‚îÄ‚îÄ assemble_ios_debug.yml
    ‚îî‚îÄ‚îÄ assemble_ios_release.yml

ios/
‚îú‚îÄ‚îÄ exportOptions.plist (Ë∞ÉËØïÁâà)
‚îú‚îÄ‚îÄ exportOptions.release.plist (Áîü‰∫ßÁâà)
‚îî‚îÄ‚îÄ fastlane/ (ÂèØÈÄâÔºåÁî®‰∫é match)

android/
‚îî‚îÄ‚îÄ app/build.gradle (Á≠æÂêçÈÖçÁΩÆ)
```

---

# üîê GitHub Secrets ÈÖçÁΩÆÊ∏ÖÂçïÔºàÂøÖÈ°ªËÆæÁΩÆÔºâ

ËØ∑Âú®‰Ω†ÁöÑ‰ªìÂ∫ì ‚Üí Settings ‚Üí Secrets and variables ‚Üí Actions ‰∏≠Ê∑ªÂä†‰ª•‰∏ãÂØÜÈí•Ôºö

| Secret ÂêçÁß∞ | Á±ªÂûã | Á§∫‰æãÂÄº |
|-------------|------|--------|
| `APP_ID` | String | `com.app2` |
| `APP_NAME` | String | `Taro Demo` |
| `VERSION_NAME` | String | `1.0.0` |
| `VERSION_CODE` | Number | `10` |
| `BUILD_TYPE` | String | `debug` Êàñ `release` |
| `KEYSTORE_FILE` | String | `debug.keystore` |
| `KEYSTORE_PASSWORD` | String | `android` |
| `KEYSTORE_KEY_ALIAS` | String | `androiddebugkey` |
| `KEYSTORE_KEY_PASSWORD` | String | `android` |
| `ANDROID_KEYSTORE_BASE64` | Base64 | base64 ÁºñÁ†ÅÁöÑ `keystore.jks` Êñá‰ª∂ÂÜÖÂÆπ |
| `TEAM_ID` | String | `ABC123DEF4` |
| `DEBUG_PROVISIONING_PROFILE_SPECIFIER` | String | `Development` |
| `RELEASE_PROVISIONING_PROFILE_SPECIFIER` | String | `App Store` |
| `DEBUG_SIGNING_CERTIFICATE_P12_DATA` | Base64 | base64 ÁºñÁ†ÅÁöÑ `.p12` Êñá‰ª∂ÂÜÖÂÆπ |
| `DEBUG_SIGNING_CERTIFICATE_PASSWORD` | String | `.p12` ÂØÜÁ†Å |
| `DEBUG_PROVISIONING_PROFILE_DATA` | Base64 | base64 ÁºñÁ†ÅÁöÑ `.mobileprovision` Êñá‰ª∂ÂÜÖÂÆπ |
| `RELEASE_SIGNING_CERTIFICATE_P12_DATA` | Base64 | base64 ÁºñÁ†ÅÁöÑ `.p12` Êñá‰ª∂ÂÜÖÂÆπ |
| `RELEASE_SIGNING_CERTIFICATE_PASSWORD` | String | `.p12` ÂØÜÁ†Å |
| `RELEASE_PROVISIONING_PROFILE_DATA` | Base64 | base64 ÁºñÁ†ÅÁöÑ `.mobileprovision` Êñá‰ª∂ÂÜÖÂÆπ |
| `APP_STORE_CONNECT_USERNAME` | String | `your@apple.com` |
| `APP_STORE_CONNECT_PASSWORD` | String | Apple ID ÂØÜÁ†ÅÊàñ App-specific password |

> üí° Â¶Ç‰ΩïÁîüÊàê base64Ôºö
>
> ```bash
> base64 your_certificate.p12 > cert.base64
> base64 your_profile.mobileprovision > profile.base64
> ```

---

# ‚úÖ 1. `.github/workflows/assemble_android_debug.yml`

```yaml
name: ü§ñ Build Android Debug (Staging)

on:
  push:
    branches:
      - staging

env:
  APP_ID: ${{ secrets.APP_ID }}
  APP_NAME: ${{ secrets.APP_NAME }}
  VERSION_NAME: ${{ secrets.VERSION_NAME }}
  VERSION_CODE: ${{ secrets.VERSION_CODE }}
  BUILD_TYPE: debug
  KEYSTORE_FILE: ${{ secrets.KEYSTORE_FILE }}
  KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
  KEYSTORE_KEY_ALIAS: ${{ secrets.KEYSTORE_KEY_ALIAS }}
  KEYSTORE_KEY_PASSWORD: ${{ secrets.KEYSTORE_KEY_PASSWORD }}

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      - name: üü¢ Setup Node.js & pnpm
        uses: pnpm/action-setup@v4
        with:
          node-version: "22"
          pnpm-version: "latest"

      - name: üì¶ Install dependencies
        run: |
          pnpm install --frozen-lockfile
          pnpm exec react-native config

      - name: üì± Setup Android SDK
        uses: android-actions/setup-android@v3

      - name: üèóÔ∏è Build Debug APK
        run: |
          cd android
          chmod +x ./gradlew
          ./gradlew clean assembleDebug --stacktrace

      - name: ‚úÖ Check APK exists
        run: |
          if [ ! -f "android/app/build/outputs/apk/debug/app-debug.apk" ]; then
            echo "‚ùå APK not found!"
            exit 1
          fi

      - name: üíæ Upload Debug APK Artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-android-debug-apk
          path: android/app/build/outputs/apk/debug/app-debug.apk
```

---

# ‚úÖ 2. `.github/workflows/assemble_android_release.yml`

```yaml
name: ü§ñ Build Android Release (Production)

on:
  push:
    branches:
      - main
      - master

env:
  APP_ID: ${{ secrets.APP_ID }}
  APP_NAME: ${{ secrets.APP_NAME }}
  VERSION_NAME: ${{ secrets.VERSION_NAME }}
  VERSION_CODE: ${{ secrets.VERSION_CODE }}
  BUILD_TYPE: release
  KEYSTORE_FILE: ${{ secrets.KEYSTORE_FILE }}
  KEYSTORE_PASSWORD: ${{ secrets.KEYSTORE_PASSWORD }}
  KEYSTORE_KEY_ALIAS: ${{ secrets.KEYSTORE_KEY_ALIAS }}
  KEYSTORE_KEY_PASSWORD: ${{ secrets.KEYSTORE_KEY_PASSWORD }}

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      - name: üü¢ Setup Node.js & pnpm
        uses: pnpm/action-setup@v4
        with:
          node-version: "22"
          pnpm-version: "latest"

      - name: üì¶ Install dependencies
        run: |
          pnpm install --frozen-lockfile
          pnpm exec react-native config

      - name: üì± Setup Android SDK
        uses: android-actions/setup-android@v3

      - name: üîê Decode Keystore
        run: |
          mkdir -p ~/.android
          echo "${{ secrets.ANDROID_KEYSTORE_BASE64 }}" | base64 --decode > ~/.android/keystore.jks
          chmod 600 ~/.android/keystore.jks

      - name: üèóÔ∏è Build Release APK
        run: |
          cd android
          chmod +x ./gradlew
          ./gradlew clean assembleRelease --stacktrace

      - name: ‚úÖ Check APK exists
        run: |
          if [ ! -f "android/app/build/outputs/apk/release/app-release.apk" ]; then
            echo "‚ùå APK not found!"
            exit 1
          fi

      - name: üíæ Upload Release APK Artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-android-release-apk
          path: android/app/build/outputs/apk/release/app-release.apk

      - name: üì¶ Build AAB
        run: |
          cd android
          ./gradlew bundleRelease

      - name: üíæ Upload AAB Artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-android-release-aab
          path: android/app/build/outputs/bundle/release/app-release.aab
```

---

# ‚úÖ 3. `.github/workflows/assemble_ios_debug.yml`

```yaml
name: üçè Build iOS Debug (Staging)

on:
  push:
    branches:
      - staging

env:
  APP_ID: ${{ secrets.APP_ID }}
  APP_NAME: ${{ secrets.APP_NAME }}
  VERSION_NAME: ${{ secrets.VERSION_NAME }}
  BUILD_NUMBER: ${{ github.run_number }}
  BUILD_TYPE: debug
  TEAM_ID: ${{ secrets.TEAM_ID }}
  PROVISIONING_PROFILE_SPECIFIER: ${{ secrets.DEBUG_PROVISIONING_PROFILE_SPECIFIER }}
  CODE_SIGN_IDENTITY: "Apple Development"
  SIGNING_CERTIFICATE_P12_DATA: ${{ secrets.DEBUG_SIGNING_CERTIFICATE_P12_DATA }}
  SIGNING_CERTIFICATE_PASSWORD: ${{ secrets.DEBUG_SIGNING_CERTIFICATE_PASSWORD }}
  PROVISIONING_PROFILE_DATA: ${{ secrets.DEBUG_PROVISIONING_PROFILE_DATA }}

jobs:
  build:
    runs-on: macos-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      - name: üü¢ Setup Node.js & pnpm
        uses: pnpm/action-setup@v4
        with:
          node-version: "22"
          pnpm-version: "latest"

      - name: üì¶ Install dependencies
        run: |
          pnpm install --frozen-lockfile
          pnpm exec react-native config

      - name: üçé Setup CocoaPods
        run: |
          cd ios
          pod install --repo-update

      - name: üöÄ Install Fastlane
        run: |
          gem sources --add https://gems.ruby-china.com/ --update
          gem install fastlane -N

      - name: üîê Setup Certificates and Profiles
        run: |
          mkdir -p ~/Certificates
          # Ëß£Á†ÅËØÅ‰π¶
          echo "$SIGNING_CERTIFICATE_P12_DATA" | base64 --decode > ~/Certificates/cert.p12
          # Ëß£Á†ÅÈÖçÁΩÆÊñá‰ª∂
          echo "$PROVISIONING_PROFILE_DATA" | base64 --decode > ~/Certificates/profile.mobileprovision
          # ÂØºÂÖ•ËØÅ‰π¶
          security import ~/Certificates/cert.p12 -k ~/Library/Keychains/login.keychain-db -P "$SIGNING_CERTIFICATE_PASSWORD" -T /usr/bin/security
          # ËÆæÁΩÆÈÖçÁΩÆÊñá‰ª∂
          cp ~/Certificates/profile.mobileprovision ~/Library/MobileDevice/Provisioning\ Profiles/

      - name: üèóÔ∏è Build IPA
        run: |
          cd ios
          xcodebuild archive \
            -project app2.xcodeproj \
            -scheme app2 \
            -configuration Debug \
            -archivePath build/app2.xcarchive \
            CODE_SIGN_IDENTITY="$CODE_SIGN_IDENTITY" \
            PROVISIONING_PROFILE_SPECIFIER="$PROVISIONING_PROFILE_SPECIFIER" \
            DEVELOPMENT_TEAM="$TEAM_ID" \
            SKIP_INSTALL=NO \
            BUILD_LIBRARY_FOR_DISTRIBUTION=YES

          # ÂØºÂá∫ IPA
          xcodebuild -exportArchive \
            -archivePath build/app2.xcarchive \
            -exportPath build/export \
            -exportOptionsPlist ios/exportOptions.plist \
            -exportFormat ipa

      - name: ‚úÖ Check IPA exists
        run: |
          if [ ! -f "ios/build/export/app2.ipa" ]; then
            echo "‚ùå IPA not found!"
            exit 1
          fi

      - name: üíæ Upload Debug IPA Artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-ios-debug-ipa
          path: ios/build/export/app2.ipa
```

---

### üìÑ `ios/exportOptions.plist`ÔºàË∞ÉËØïÁâàÔºâ

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>development</string>
    <key>destination</key>
    <string>export</string>
</dict>
</plist>
```

---

# ‚úÖ 4. `.github/workflows/assemble_ios_release.yml`

```yaml
name: üçè Build iOS Release (Production)

on:
  push:
    branches:
      - main
      - master

env:
  APP_ID: ${{ secrets.APP_ID }}
  APP_NAME: ${{ secrets.APP_NAME }}
  VERSION_NAME: ${{ secrets.VERSION_NAME }}
  BUILD_NUMBER: ${{ github.run_number }}
  BUILD_TYPE: release
  TEAM_ID: ${{ secrets.TEAM_ID }}
  PROVISIONING_PROFILE_SPECIFIER: ${{ secrets.RELEASE_PROVISIONING_PROFILE_SPECIFIER }}
  CODE_SIGN_IDENTITY: "Apple Distribution"
  SIGNING_CERTIFICATE_P12_DATA: ${{ secrets.RELEASE_SIGNING_CERTIFICATE_P12_DATA }}
  SIGNING_CERTIFICATE_PASSWORD: ${{ secrets.RELEASE_SIGNING_CERTIFICATE_PASSWORD }}
  PROVISIONING_PROFILE_DATA: ${{ secrets.RELEASE_PROVISIONING_PROFILE_DATA }}

jobs:
  build:
    runs-on: macos-latest
    steps:
      - name: üì• Checkout code
        uses: actions/checkout@v4

      - name: üü¢ Setup Node.js & pnpm
        uses: pnpm/action-setup@v4
        with:
          node-version: "22"
          pnpm-version: "latest"

      - name: üì¶ Install dependencies
        run: |
          pnpm install --frozen-lockfile
          pnpm exec react-native config

      - name: üçé Setup CocoaPods
        run: |
          cd ios
          pod install --repo-update

      - name: üöÄ Install Fastlane
        run: |
          gem sources --add https://gems.ruby-china.com/ --update
          gem install fastlane -N

      - name: üîê Setup Certificates and Profiles
        run: |
          mkdir -p ~/Certificates
          # Ëß£Á†ÅËØÅ‰π¶
          echo "$SIGNING_CERTIFICATE_P12_DATA" | base64 --decode > ~/Certificates/cert.p12
          # Ëß£Á†ÅÈÖçÁΩÆÊñá‰ª∂
          echo "$PROVISIONING_PROFILE_DATA" | base64 --decode > ~/Certificates/profile.mobileprovision
          # ÂØºÂÖ•ËØÅ‰π¶
          security import ~/Certificates/cert.p12 -k ~/Library/Keychains/login.keychain-db -P "$SIGNING_CERTIFICATE_PASSWORD" -T /usr/bin/security
          # ËÆæÁΩÆÈÖçÁΩÆÊñá‰ª∂
          cp ~/Certificates/profile.mobileprovision ~/Library/MobileDevice/Provisioning\ Profiles/

      - name: üèóÔ∏è Build IPA
        run: |
          cd ios
          xcodebuild archive \
            -project app2.xcodeproj \
            -scheme app2 \
            -configuration Release \
            -archivePath build/app2.xcarchive \
            CODE_SIGN_IDENTITY="$CODE_SIGN_IDENTITY" \
            PROVISIONING_PROFILE_SPECIFIER="$PROVISIONING_PROFILE_SPECIFIER" \
            DEVELOPMENT_TEAM="$TEAM_ID" \
            SKIP_INSTALL=NO \
            BUILD_LIBRARY_FOR_DISTRIBUTION=YES

          # ÂØºÂá∫ IPA
          xcodebuild -exportArchive \
            -archivePath build/app2.xcarchive \
            -exportPath build/export \
            -exportOptionsPlist ios/exportOptions.release.plist \
            -exportFormat ipa

      - name: ‚úÖ Check IPA exists
        run: |
          if [ ! -f "ios/build/export/app2.ipa" ]; then
            echo "‚ùå IPA not found!"
            exit 1
          fi

      - name: üíæ Upload Release IPA Artifact
        uses: actions/upload-artifact@v4
        with:
          name: app-ios-release-ipa
          path: ios/build/export/app2.ipa
```

---

### üìÑ `ios/exportOptions.release.plist`ÔºàÁîü‰∫ßÁâàÔºâ

```xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>method</key>
    <string>app-store</string>
    <key>uploadBitcode</key>
    <true/>
    <key>uploadSymbols</key>
    <true/>
    <key>compileBitcode</key>
    <true/>
</dict>
</plist>
```

---

# ‚úÖ ÊúÄÁªàÊÄªÁªì

‰Ω†Áé∞Âú®Êã•ÊúâÔºö

‚úÖ 4 ‰∏™Áã¨Á´ã„ÄÅÊ∏ÖÊô∞ÁöÑÂ∑•‰ΩúÊµÅÊñá‰ª∂  
‚úÖ ÊâÄÊúâÂèòÈáèÈÄöËøá `secrets` ÂÆâÂÖ®Ê≥®ÂÖ•  
‚úÖ Android ÊîØÊåÅ `debug.keystore` ÂíåËá™ÂÆö‰πâ keystore  
‚úÖ iOS ÊîØÊåÅÊâãÂä®ÂØºÂÖ•ËØÅ‰π¶ÂíåÈÖçÁΩÆÊñá‰ª∂ÔºàÊó†ÈúÄ `match`Ôºâ  
‚úÖ ÊûÑÂª∫‰∫ßÁâ©Ëá™Âä®‰∏ä‰º†‰∏∫ Artifact  
‚úÖ ÊîØÊåÅ `pnpm` + `Node.js 22`  
‚úÖ ÊîØÊåÅ `main/master` Âíå `staging` ÂàÜÊîØÂàÜÂà´ÊûÑÂª∫Áîü‰∫ßÁâàÂíåÊµãËØïÁâà  

---

üéØ **‰∏ã‰∏ÄÊ≠•Âª∫ËÆÆ**Ôºö

1. Âú® GitHub Secrets ‰∏≠ÈÖçÁΩÆÊâÄÊúâÂØÜÈí•  
2. Âú®Êú¨Âú∞ÊµãËØï `assemble_ios_debug.yml` ÊòØÂê¶ËÉΩÊàêÂäüÊûÑÂª∫  
3. Ê∑ªÂä† `firebase_app_distribution` Êàñ `testflight` ÂèëÂ∏ÉÊ≠•È™§  
4. ËÄÉËôë‰ΩøÁî® `fastlane match` Êõø‰ª£ÊâãÂä®ÂØºÂÖ•ËØÅ‰π¶ÔºàÊõ¥ÂÆâÂÖ®Ôºâ

---

ÈúÄË¶ÅÊàëÂ∏Æ‰Ω†ÁîüÊàê‰∏Ä‰∏™ **Âü∫‰∫é `fastlane match` ÁöÑ iOS ÊûÑÂª∫ÊµÅÁ®ã** ÂêóÔºüÂÆÉ‰ºöËá™Âä®ÁÆ°ÁêÜËØÅ‰π¶ÔºåÈÅøÂÖçÊâãÂä®Êìç‰Ωú„ÄÇÊ¨¢ËøéÁªßÁª≠ÊèêÈóÆÔºÅ
